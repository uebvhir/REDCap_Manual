---
description: "![UEB](Imatges/logo_UEB_lletres_blanc.png){ width=15% } ![IR](Imatges/Logo_VHIR_HUVH_blanco_fondo_lila_JMC_2.png){ width=15% }"
title: "<div style='text-align:right;font-size:15px'><U>Català</u> [Castellano](Version2021/REDCap_CAS/introducción-al-redcap.html) [English](Version2021/REDCap_ANG/redcap-introduction.html)</div><br><br>"
subtitle: "![RedCAP](Imatges/RedCAP_logo.jfif){ width=100% }<br><br><div style='text-align:center;color:black;font-size:100px'>Manual</div><br><br>"
output: 
  bookdown::gitbook:
    split_by: "chapter"
editor_options: 
  chunk_output_type: console
---


```{r, echo = FALSE, results = 'hide', message = F}
require(knitr)
# include this code chunk as-is to set options
opts_chunk$set(ommcent = NA, prompt = TRUE, tidy = FALSE, fig.width = 7, fig.height = 7,echo = FALSE, message = FALSE, warning = FALSE)
Sys.setlocale("LC_TIME", "C")
```

```{r, echo = FALSE, results = 'hide', message = F}
require(DiagrammeR)
require(rio)
require(anaStatsUEB)
```


# **Introducció al REDCap**

## **Aplicació REDCap**

> **Abans d'utilitzar REDCap s'ha de tenir clar el tipus d'estudi que es pretén fer i quins són els quaderns de recollida de la informació que s'utilitzaran.**

[REDCap](https://www.project-redcap.org) és una aplicació segura basada en el web per a crear i manipular bases de dades. 

Bàsicament hi ha *tres tipus d'estudis a utilitzar disponibles*:

* Estudi longitudinal (Assaig Clínic o Cohort)
* Estudi transversal (Recollida puntual)
* Enquesta dirigida a tercers

En els dos primers tipus d'estudi es crearà una estructura de gestió de la informació dins de REDCap. Mentre que, a les enquestes dirigides a tercers, el creador de l'estructura de recollida de la informació pot gestionar el treball de manera que els qüestionaris li siguin remesos per via electrònica a l'enquestat que ha d'emplenar-la.

## **Accés al sistema**

Al sistema REDCap es pot accedir a través del *URL* [https://servirredcap.vhir.org/redcap/](https://servirredcap.vhir.org/redcap/) amb el nostre nom d'usuari i clau d'accés. 

[![](Imatges/imatge_30.png)](https://servirredcap.vhir.org/redcap/)

Una vegada aprovat l'accés, apareix la pantalla inicial amb diverses pestanyes en les quals poder efectuar els treballs necessaris. 

* En aquesta pàgina també trobem els enllaços a la formació pròpia que ofereix la Universitat de Vanderbilt (1).

![](Imatges/imatge_78.png)

![](Imatges/imatge_79.png)

## **Sol·licitud serveis**

Per demanar el servei de creació d'una base de dades al sistema REDCap cal:

* [Omplir el formulari](http://www.vhir.org/portal1/webUEB/Alta.aspx) per fer una sol·licitud a l'UEB.
* Seleccionar l'opció Tipologia = 'REDCap'.
* Omplir la resta d'apartats (marcats amb vermell i un * si són d'entrada obligatòria).

[![](Imatges/imatge_1.png)](http://www.vhir.org/portal1/webUEB/Alta.aspx)



# **Guia ràpida: Entrada de dades**

## **Introducció/modificació d'un registre**

> **Una advertència que cal fer a l’hora de treballar en REDCap és que la tecla *Intro* no s’ha de prémer, ja que implica desar el registre i sortir, no passar al següent. Per passar al següent cal fer un clic al botó esquerre del ratolí.**


El REDCap assigna un únic nom o codi a tots els qüestionaris o mesures d’un individu. Normalment, és la persona que introdueix les dades qui assigna aquest codi, però el sistema ho pot genera automàticament com un número.

![](Imatges/imatge_35.png)


* Per introduir un cas cal clicar en l’opció del menú “*Agregar/Editar registros*”(1).
* Apareixerà en l’àrea de visió un menú que permet elegir entre els pacients ja introduïts o posar el número o codi del nou pacient (2). 
* En la part esquerra (3) apareixeran els qüestionaris a omplir del pacient amb un cercle a la dreta on, fent un clic damunt es
mostra el qüestionari a omplir. 
* El color d’aquests cercles indiquen l’estat del qüestionari (4).
    + En blanc indica que no hi ha cap dada guardada.
    + En vermell indica que hi ha dades però està incomplet. 
    + En groc que les dades hi són, però no estan verificades. 
    + Finalment en verd indica que el registre està complet.

Una altra manera d'introduir i/o visualitzar l'estat de les dades és utilitzar la pissarra d’estat o “*Dashboard*”. Si es clica el menú corresponent, s’obri la matriu de pacients/qüestionaris, amb l’estat d'introducció de cadascú segons el codi de color esmentat abans. 

* Clicant damunt del cercle del qüestionari seleccionat del pacient elegit, aquest s’obri i es pot complimentar. 
* Clicant damunt del codi del pacient torna a aparèixer la finestra de la figura anterior d’introducció de dades per pacients.

## **Visualització de les dades: Dashboard**

La pissarra pot estar personalitzada per l'administrador de la base de dades perquè sigui més senzilla. 

1. En el cas d’un estudi transversal o elaborat de manera clàssica apareixen tots els qüestionaris per pacient com en la següent figura.

![](Imatges/imatge_36.png)


2. En el cas d’un estudi longitudinal els qüestionaris apareixen separats per línies verticals corresponents als esdeveniments que van succeint. Així, en l’exemple, es disposa de diferents esdeveniments (*Screeinng*, *cycle 1D1*, *Cycle 1 D2*,..., *Concomitant Medication*). Alguns dels qüestionaris poden repetir-se en els esdeveniments com és el cas de *Vital Signs*.

![](Imatges/imatge_37.png)


Una vegada es selecciona el qüestionari clicant en el cercle apareix el qüestionari que s’ha de complimentar.

![](Imatges/imatge_38.png)

## **Tipus de dades**

Com s'explica a l'apartat [Creació d'una base de dades en REDCap](#en15) es poden introduir dades de diferent tipus. 

En la següent imatge podem observar algunes qüestions generals a incloure usualment a una base de dades.

* Normalment, en la part esquerra tenim l’enunciat de la pregunta i en la part dreta el quadre on introduir els valors o els botons de selecció. 
* En vermell ens indica si el valor és obligatori i en blau si volem restablir el valor per tornar a començar. 
* Opcionalment apareix un globus amb una H que ens mostra un quadre amb l’historial què i com ha modificat la dada. 
* Finalment, el globus permet obrir la finestra de gestió de “*Queries*”. Aquest globus que en principi és groc canvia segons l’estat de la “query” com es veurà més endavant.

![](Imatges/imatge_39.png)


Els tipus d’informació a incloure són:

* **Grup de botons “*Radio Group*”**. La persona que introdueix les dades ha de seleccionar una de les opcions en forma de botó rodó. Aquestes opcions són excloents.

![](Imatges/imatge_40.png)


* **Selecció múltiple**: La persona que introdueix pot seleccionar més d’una opció. Aquestes són quadrats. Per exemple un malalt pot tenir positius diversos marcadors tumorals.

![](Imatges/imatge_41.png)


* **Finestra desplegable**: La persona que introdueix dades pot seleccionar alguna de les opcions que apareixen al clicar sobre la fletxa del desplegable.

![](Imatges/imatge_42.png)


* **Campo data**: S’ha d’introduir la data segons el format que s’indica o seleccionant-la des del calendari. Si es prem el botó "*Hoy*" s’inclourà la data d’avui.

![](Imatges/imatge_43.png)


* **Camp text o número**: S’introdueix un número o un text en el quadro. Si les regles de validació estan activades, ens indicarà si la dada introduïda no és adient.

![](Imatges/imatge_44.png)


* **Camp autocalculat**: Aquest camp s'enplena automàticament en resoldre l’equació una vegada introduïdes les dades necessàries per fer els càlculs.

![](Imatges/imatge_45.png)


* **Barra lliscadora**: Movent a dreta o esquerra la barra s’assigna un número de l'1 a 100 com valor seleccionat.

![](Imatges/imatge_46.png)


* **Ontologia**: Hi ha algunes classificacions i/o ontologies disponibles com la de medicaments. Posant les primeres lletres suggereix el fàrmac i inclou el codi.

![](Imatges/imatge_47.png)


Redcap permet de forma senzilla de programar l’opció d’obrir noves preguntes segons el que s’hagi omplert per alguna variable. En l’exemple si es respon no es passa a la següent pregunta.

![](Imatges/imatge_48.png)


Al final del formulari apareix una pregunta per tal de poder classificar l’estat del formulari abans de guardar-lo. L’Estat és complet, incomplet o sense verificar. En la taula de dades es marquen els qüestionaris amb codis de color de cada situació.

![](Imatges/imatge_49.png)


Per últim, es pot desar i sortir del formulari o deixar i sortir al següent formulari.

![](Imatges/imatge_50.png)


En algunes situacions un individu pot tenir diverses respostes per alguns qüestionaris, com per exemple, la medicació concomitant o els efectes adversos. En aquest cas apareix una creu al costat de l’indicador d’estat del qüestionari per tal de poder afegir més instàncies. Una vegada s’obri el qüestionari hi ha un indicador de la instància actual i un indicador del nombre de dades completes (1/2, 2/2, etc.).

![](Imatges/imatge_51.png)


Simplement clicant en el botó "*Add new*", s’afegeix una nova observació.

![](Imatges/imatge_52.png)


## **Maneig de "*Queries*"**

Una de les opcions que ens dóna REDCap és la possibilitat de fer control de dades vàlides en el moment d’introducció. [Aquests criteris de validació es generen en el moment del disseny del qüestionari](#en16) i normalment es posa un valor mínim i màxim. 

En cas que el valor que s’introdueix estigui fora de rang, surt una alerta indicant-ho.

![](Imatges/imatge_53.png)

Pel que fa als camps que són obligatoris, quan els intentem gravar surt una advertència amb el llistat de camps que són obligatoris, però no s’han omplert. 

* Aquest llistat hauria de ser petit. 
* Hi ha tres opcions: 
    + "*Okay*": on es torna al qüestionari per tal de poder omplir les dades. 
    + Les altres dues opcions permeten ignorar el *warning* i continuar bé abandonant el registre o anant al següent formulari.

![](Imatges/imatge_54.png)


Quan guardem un qüestionari també ens apareix una advertència quan alguna de les regles de qualitat programades no es compleix. La persona què introdueix dades té l’opció de tornar enrere i corregir-ho, o bé, obrir una *Query* per reprendre-la posteriorment. 

* En aquest sentit l'usuari amb privilegis d'[*entrador de dades*](#en3) només pot obrir la *Query* però no tancar-la.

![](Imatges/imatge_55.png)


La persona que entra dades pot tornar enrere i verificar si ha estat una errada d'introducció i corregir-la per tal que les dades siguin correctes. Si no hi ha error d’introducció, cal polsar sobre el comentari. Se'ns obre la finestra de resolució de flux. 

Hi ha dues opcions:

* Indicar que el valor de la dada està verificat i no es tracta d’un error, o bé, obrir la consulta.
    + En cas d’obrir una consulta cal afegir un comentari. 
    + Hi ha la possibilitat d’assignar la consulta a un usuari com per exemple *el monitor*.

![](Imatges/imatge_56.png)


A més de les *Queries* que es generen a l’hora de guardar les dades, es poden executar regles de coherència encaminades a detectar possibles errors que poden convertir-se en una *Query*. 

Per executar les regles cal anar a l’opció de menú de “*Calidad de Datos*” on s’obrirà la finestra següent. Podem observar:

* Una sèrie de regles que el sistema REDCap té predeterminades.
* Una sèrie de botons que es poden prémer per tenir diferents opcions.

![](Imatges/imatge_57.png)


Les regles que estan en vermell són les pròpies del sistema. Aquestes s'anomenen amb lletres i, concretament cal considerar les opcions:

* *B*: Valors Faltants en dades requerides.
* *C* i *D*: [Errors de validació](#en5), els quals hem vist anteriorment.
* *Todo*: executa les regles per a tots els pacients. 
    + S'obté el nombre de discrepàncies i l’activació de l’opció *view*.

![](Imatges/imatge_58.png)


Si es clica sobre el botó *view*, es mostra un llistat amb els registres amb un l’error, amb l’opció d’obrir una *Query* com s’ha vist anteriorment.

![](Imatges/imatge_59.png)


Com a *usuari* o com a *monitor* cal veure quines són les *Queries* a efectuar. Per això hem d'anar al menú de *resolver problemas* on apareix el llistat de *Queries*.

* Clicant en comentaris es pot obrir la resolució d'aquesta.

![](Imatges/imatge_60.png)


El *entrador de dades* pot respondre la *Query*, però és el *monitor* qui ha de tancar la consulta.

![](Imatges/imatge_61.png)


Una vegada un *Query* està resolta, aquesta desapareix del llistat. Si hi volem tornar a accedir, només cal obrir el menú de *resolver problemas* i al filtre elegir l'opció *cerrado/problema resuelto*.

![](Imatges/imatge_62.png)


Al qüestionari de cada individu es marca la *Query* pendent amb un punt vermell sobre el globus, com a la imatge que segueix. 

* Si la *Query* esà resolta apareix una marca verda. 
* En cas que la *Query* involucri diversos camps no apareixen aquestes marques.

![](Imatges/imatge_63.png)


Una vegada resoltes les *Queries*, el *monitor*, pot bloquejar els formularis perquè no siguin modificats de nou. 

* Al final del formulari apareix el botó de bloqueig.

![](Imatges/imatge_64.png)



## **Entrada doble de dades**

REDCap ofereix efectuar la doble entrada de dades, tot i que té alguns inconvenients que descriurem a continuació.

Una vegada està creada la base de dades, per poder utilitzar aquest mòdul l'hem d'activar:

![](Imatges/imatge_65.png)


Primerament crearem els nous [rols d’usuari](#en3) (ex.: *entrador dades* (#1), *entrador dades* (#2) i *revisor* (o *monitor*)) i assignarem als usuaris aquests rols.

* Cal assignar uns usuaris al *data_entry1* i altres al *data_entry2*. Aparentment aquests usuaris entraran de manera normal les dades de l'usuari. 

![](Imatges/imatge_67.png)


Si observem el quadre següent, veurem que per cada nou usuari:

* Usuari *data_entry1*:
    + Les dades que entri aquest usuari es guardaran en un subjecte que serà el número de pacient amb el sufix "_1".
* Usuari *data_entry2*:
    + Les dades que entri aquest usuari es guardaran en un subjecte que serà el número de pacient amb el sufix "_2".
* Usuari *reviewer*: Usuari *monitor* qui veurà la doble entrada.

![](Imatges/imatge_68.png)

### _Data Comparison Tool_

En la part esquerra del menú es troba l’opció *Data Comparison Tool*

![](Imatges/imatge_69.png)


Primerament, seleccionem un registre o tots els registres entrats. Llavors s’activa l’eina de comparció. Aqui, resideix un dels inconvenients d'aquest mòdul, ja que, si el formulari és molt gran hi surten.

![](Imatges/imatge_71.png)
![](Imatges/imatge_70.png)


En forma de taula separada per l'usuari d'entrada de dades apareixen les discrepàncies. 

* Mostra el registre amb els sufixos "_1" i "_2".
* Els camps discrepants.
* Els noms dels formularis.
* Els valors. 

Si es volen canviar valors dels registres, només cal clicar al missatge “*clic here to merge them*”.

![](Imatges/imatge_72.png)


Apareix una nova pantalla on es mostren les discrepàncies i el *revisor* ha de triar quin és el valor correcte i, si no és cap, quin és el nou valor.

![](Imatges/imatge_73.png)


Una vegada seleccionades les instàncies a canviar, es prem el botó *Merge Records* que ens generarà un nou registre sense el sufix amb les dades correctes. 

* Aquest nou registre és fruit de la combinació dels dos registres anteriors. Per tant, ara tindrem tres registres com s'observa a la imatge següent:

![](Imatges/imatge_74.png)

Quan no hi ha diferències el sistema indica que els dos registres són idèntics, que no es troben diferències. 

* En aquest cas cal crear el registre comú per tal d'exportar finalment un únic registre per pacient.

![](Imatges/imatge_75.png)


Només cal tenir en compte a l’hora d’analitzar les dades que en les exportacions hi són els tres registres i cal fer servir el que no té sufix.


## **Registre d'activitat: _Log/Registros_**

Per tal de fer l’*audit control* dels registres, cal clicar al menú d'*Aplicacions* l’opció *Log/Registros* que proporciona el llistat d’accessos, modificacions i canvis efectuats a la base de dades.

![](Imatges/imatge_76.png)


El registre es pot exportar a un full d’Excel i, a més a més, es poden filtrar els registres per tipus d’esdeveniment, nom de l’usuari, registre de temps, etc.

![](Imatges/imatge_77.png)


# **Gestió d'usuaris**

## **Alta d'un usuari**

Per tal de demanar l’alta d’un usuari cal posar-se en contacte amb la Unitat d’Estadística i Bioinformàtica (UEB) simplement enviar un correu a [l’enllaç que apareix en el web](mailto:ueb@vhir.org?subject=Alta usuari RedCAP) d’accès a REDCap.

![](Imatges/imatge_31.png)


Quan un usuari sol·licita l'alta al sistema REDCap automàticament rep un correu electrònic a l'adreça facilitada al sistema. Aquesta persona podrà llavors donar-se d'altra a través de l'enllaç que s'adjunti en aquest correu:

![](Imatges/imatge_25.png)


## **Pregunta de recuperació de la clau d'accés**

Després d'establir la vostra clau d'accés i, per tant, accedir al sistema, és **molt important** establir la pregunta de recuperació de la clau. Aquesta pregunta ens permetrà recuperar la clau directament, sense haver de fer una petició als administradors del sistema.

* Cal accedir a *"My Profile"* i prémer l'opció *"Reset password recovery question"* com s'indica a la imatge.

![](Imatges/imatge_26.png)

* Ens apareix el següent quadre de text que ens pregunta si volem establir aquesta pregunta, on seleccionarem *"Reset"*.

![](Imatges/imatge_27.png)

Llavors, ens surt un quadre de diàleg similar al següent on ens dóna una bateria de possibles preguntes per establir la nostra pregunta de recuperació.

![](Imatges/imatge_28.png)

*Una vegada hem elegit una opció, introduïm la resposta a recordar per recuperar la clau d'accés en cas d'oblidar-la i guardem la pregunta.

![](Imatges/imatge_29.png)


## **Cas d'ús**

Una vegada [accediu al sistema](https://servirredcap.vhir.org/redcap/) podem observar les bases de dades a les quals l’usuari te accés. En aquest cas, l’usuari pot accedir a diverses bases de dades.

* Estudi: 
    + Assaig clínic que està construït com a estudi clàssic.
    + En la taula ens indica el nombre de registres camps, formularis i l’estat del projecte. 
    + Si té una forma de "clau anglesa" indica que el projecte està en mode desenvolupament i es poden canviar les dades i els formularis sense problemes. Si està amb una marca verda, com de vist i plau, indica que el projecte està en mode producció, i no és fàcil de canviar el contingut dels qüestionaris.

![](Imatges/imatge_32.png)

Si seleccionem l’estudi, ens apareix la pantalla general del REDCap:

![](Imatges/imatge_33.png)

En la part dreta està l’àrea de visió mentre que en la part esquerra de la pantalla apareix el menú principal del projecte. En aquest últim podem observar les següents opcions seleccionables:

* ***Bases de Datos***: Torna al llistat de les bases de dades que pot seleccionar l’usuari.
* **Inici de Projecte**: Per defecte, és la pantalla que surt on hi ha un accés ràpid a algunes de les tasques i el panel del projecte amb unes estadístiques bàsiques del projecte i els usuaris que hi tenen accés.
* **Configuració del projecte**: Si l’usuari té els permisos pertinents, permet canviar les característiques i configuració dels CRFs.
* **Pissarra de _Estados de registro_**: Per accedir a una matriu de subjectes qüestionaris per poder accedir ràpidament al quadern d’interès. A més a més, indica l’estat de recollida de cada CRF.
* ***Agregar/Editar Registros***: Permet afegir casos nous o editar casos ja existents.
* ***Exportación de datos. Reportes y Estadísticas***: Permet exportar dades pels principals programes d’anàlisi i veure informes que s’hagin establert.
* ***Calidad de los datos y resolver problemas***: Permet processar una sèrie de qüestions per detectar inconsistències o errors en la introducció de dades, així com encetar i resoldre quèries.


## **Alta de més d'un usuari**

Una vegada tingueu accés a REDCap, podreu gestionar l'alta de nous usuaris a la plataforma.

Caldrà descarregar-se la [plantilla de gestió d'usuaris](Dades/UserImportTemplate.csv) disponible al sistema de REDCap.

![](Imatges/imatge_3.png)


S'hauran d'indicar els següents camps:

```{r, results='asis'}
exemple <- import("Dades/plantilla.xlsx")
kable_ueb(exemple)
```

Quan el document estigui omplert, cal guardar-lo en format _.csv_ i fer-lo arribar al personal de la UEB.


## **Rols d'usuari i grups (DAGs)** 

### **Tipus de rol** {#en3}

Hi ha tres tipus de rol previstos a cada estudi: _Investigador, monitor i entrador de dades_.

```{r, results='asis'}
rol <- import("Dades/rols.xlsx")
kable_ueb(rol)
```


### **Creació de grups (DAGs)**

En els estudis multicèntrics és habitual generar grups d’usuaris de manera que els membres d’un grup que hagin d'entrar dades, només vegin les dades introduïdes del seu centre i no d'un altre. Els investigadors principals i monitors, però podran veure’ls tots.

Els investigadors indicaran al gestor de la base de dades (preferiblement amb full de càlcul):

* El __nom del grup__.
* El __nom dels usuaris__ que pertanyen a cada grup. 
* El __rol de cada usuari__.

Una vegada generat el grup, s’assignarà a cada usuari el rol i el grup en la secció de gestió d’usuaris del REDCap

Si es necessita introduir un grup durant el període de producció o en cas excepcional que algun privilegi hagi de ser assignat,l’investigador o la persona en qui delegui, enviarà un correu amb les especificacions al gestor de la base de dades.


# **Gestió i Creació de base de dades**

Primerament es realitzarà un visionament dels [videos formatius](https://servirredcap.vhir.org/redcap/index.php?action=training) propis que ofereix la Universitat de Vanderbilt, creadora de REDCap.


## **Introducció a la creació d'una base de dades** {#en15}

Per a crear una nova base de dades, hem d'entrar en la pestanya “*Solicitar Nueva Base De Datos*”. Si aquesta pestanya no apareix, hem de posar-nos en contacte amb l'[Administrador del sistema](mailto:uebsol@vhir.org?subject=Sol·licitar nova base de dades RedCAP), ja que segurament no tenim activada l'opció de crear noves bases de dades.

Les bases de dades en REDCap estan en dos estats: 

* **Estat de desenvolupament**: Podem modificar cadascun dels elements fins que estigui definitivament com la desitgem.
* **Estat de producció**: Tot i que es poden efectuar alguns canvis, l'ideal és no modificar l'estructura i solament incloure informació.

Passos a seguir:

* Incloure el **títol de la base de dades** (1): Apareixerà en el sistema quan ens mostri totes les bases de dades.
* Incloure **Propòsit de la base de dades** (2): normalment *Recerca*.
* Seleccionar si volem
    + Crear el projecte de nou (3).
    + Fer servir una plantilla o algun projecte que s'hagi guardat prèviament i comparteixi la seva estructura (4).
* Una vegada creats els paràmetres, es prem el botó *send request* per a enviar un missatge a l'administrador perquè aprovi la creació de la base de dades.

![](Imatges/imatge_80.png)


Una vegada l'administrador l'aprovi, rebrem un missatge indicant que aquesta està aprovada i podrem començar a treballar. Així, la pròxima vegada que accedim al sistema, automàticament entrem en la pàgina de configuració del projecte.

* Part esquerra: Menús d'usuari, implicats amb el maneig de diferents bases de dades, la recol·lecció de dades i amb algunes aplicacions del sistema.

El sistema sol obrir-se en la pestanya de configuració del projecte. En ell apareixen set passos que cal anar emplenant progressivament abans de posar el projecte en producció i que anirem veient a poc a poc.

![](Imatges/imatge_81.png)

## **Secció:** _Ajustes principales de Proyecto_ {#en4}

Primer pas, **Decidir el tipus d'estudi** que realitzarem.

![](Imatges/imatge_82.png)


* Es tracta d'un **estudi transversal**: en el qual es recullen un o diversos qüestionaris en un moment donat on hi ha algú qui introdueix les dades.
* Es tracta d'un **estudi transversal**: en el qual s'envia un qüestionari anònim als participants perquè ho emplenin.
* Es tracta d'un **estudi longitudinal**: on es pot repetir el mateix qüestionari en diverses visites.

Al cas d'ús, es tracta d'un **estudi longitudinal** i hem de clicar el botó de *Uso de datos longitudinales*. Si hi haguera enquestes, habilitaríem l'opció *Utilizar enquestas en este proyecto?*.

## **Secció:** _Habilitar módulos opcionales y personalizaciones_

Seguidament vindran les seccions de disseny d'instruments i definir els seus esdeveniments, però abans, es preferible habilitar alguns mòduls opcionals i personalitzar alguns aspectes del nostre estudi.

![](Imatges/imatge_83.png)


Per defecte, REDCAP té habilitada l'opció d'*Auto-numeración para registros*:

* Cada nou pacient que s'inclogui a l'estudi rep un número consecutiu en la base de dades. 
* Si, per contra, es desitja incloure el número de pacient, simplement, s'inhabilita aquesta opció. 

També existeixen altres mòduls, com:

* *Módulo de horario* (únicament per estudis longitudinals): Permet programar esdeveniments pels estudis longitudinals.
* *Módulo de aleatoritzación*: Permet assignar el tractament o el placebo a partir d'una llista d'aleatorització que es puja a la base de dades.
* L'opció final defineix un camp de correu per a enviament d'enquestes als participants. Més endavant veurem les personalitzacions addicionals que podem efectuar.

## **Secció:** _Diseño de instrumentos de recolección de datos_

![](Imatges/imatge_84.png)

Al clicar a l'editor de formularis, apareix la pantalla de formularis:

![](Imatges/imatge_85.png)


* La primera acció a efectuar és canviar el nom d'aquest formulari i de la variable d'identificació si es considera oportú. 
    + Per a triar una acció premem el botó *Choose action*, que ens permetrà canviar de nom el qüestionari, esborrar-lo, copiar-lo, o guardar-lo en un fitxer zip per a ús posterior.


Dintre d'aquest instrument hi està la variable d'identificació de cadascun dels individus que formin part del sistema d'entrada de dades i que no es pot modificar.

![](Imatges/imatge_86.png)


* Clicant dues vegades sobre el nom de l'instrument, s'obrirà la pàgina d'edició. El programa ens mostrarà l'estat del formulari en mode edició. 
    + Prement sobre el llapis, podrem modificar el camp. 
    + Prement els botons de sota, podrem agregar camps o matrius de camp. 
    + Prement el botó de Vista prèvia d'aquest formulari, podrem veure el formulari en la seva manera d'edició definitiu.
 
En prémer sobre el llapis obtenim la finestra de sota:

* Se'ns adverteix que aquest camp és el que identifica tots els registres d'un subjecte i que no el podem esborrar. 
* Li canviem l'etiqueta a *Número de identificación del paciente* i ja podem agregar la resta de camps.

![](Imatges/imatge_87.png)


Per a agregar un camp premem el botó *Agregar Campo*. Seguidament apareixerà una finestra de nom *Editar Campo*, on haurem d'emplenar una sèrie de camps:

* **_Etiqueta de Campo_**: Per a donar format a la teva pregunta o camp de dades.
* **_Nombre de Variable_**: Nom de la seva etiqueta de camp que s'emmagatzema en la base de dades i es pot usar en informes, exportacions i anàlisis. 
    + Els noms de les variables poden contenir lletres, números i guions baixos, però no espais ni caràcters especials. 
    + Si volguéssim canviar el nom d'una variable abans de moure el projecte a producció, ha de canviar-lo a tot arreu on s'usa, com: càlculs, lògica de ramificació, etc.
* **_Validación_**: El tipus de camp *Text Box* (*Short Text, Number, Date/Time,…*) permet seleccionar una validació. 
    + Si desitja indicar com s'ha d'ingressar aquest camp, usi aquest desplegable i seleccioni una opció.
* **_Verificaciones de rango (mínimo y máximo)_**: Els tipus de validació de data i hora, nombre enter i número li donen capacitat per a ingressar controls de rang.
* **_Requerido_**: Per indicar si el seu camp serà requerit. 
    + La configuració predeterminada per a tots els camps està establerta en `No`.
* **_Identificador_**: Indiqui si el seu camp és un identificador. Tots els camps que es podrien identificar a una persona han de marcar-se com a identificador, independentment de qui accedirà a les seves dades.
* **_Alineación personalizada_**: Per definir l'alineació per al seu camp. 
    + La configuració predeterminada és Dreta/Vertical.
* **_Nota de campo_**: Usi aquest camp per a ingressar notes, recordatoris o instruccions per al seu camp.

### **Etiquetes de camp**

#### Tipus d'etiquetes de camp

**Text Box (Short text, Number, Date/Time,...)**

Aquest camp es pot usar per a text, dates, números, adreces de correu electrònic, números de telèfon, etc. Utilitzi el menú desplegable *Validación* per a restringir l'ingrés de dades.

![](Imatges/imatge_88.png)


* **Amb validació de data (M-D-Y)**
    + Estableixi aquest camp amb verificacions de rang (camps mínim i màxim). També pot indicar que aquest camp sigui obligatori, a més d'agregar un camp Nota.

![](Imatges/imatge_89.png)
![](Imatges/imatge_90.png)

* **Amb validació d'email**

![](Imatges/imatge_91.png)
![](Imatges/imatge_92.png)

* **Amb validació de Número (permet decimals i nombres enters)**

![](Imatges/imatge_93.png)
![](Imatges/imatge_94.png)
![](Imatges/imatge_95.png)

**Notes/Assaig**

![](Imatges/imatge_96.png)
![](Imatges/imatge_97.png)

**Camp Calculat**

Aquest camp pot realitzar càlculs en temps real basats en les dades d'altres camps. Per exemple:

* Podria crear un càlcul basat en el camp de data de naixement i el camp de data de visita per a esbrinar quina edat tenia el participant en el moment de la visita.
* Podria calcular els dies transcorreguts entre dues visites o entre una visita i el dia d'avui.

![](Imatges/imatge_98.png)
![](Imatges/imatge_99.png)


**Selecció Múltiple (Només una resposta): Llista desplegable**


Aquest camp mostrarà les opcions de resposta indicades al quadre "*Selección (una por linea)*" com una llista desplegable. Quan un camp conté múltiples opcions de resposta, ha de donar a cada elecció de resposta un nom de variable. Si no ho fa, REDCap els assignarà automàticament.

![](Imatges/imatge_100.png)
![](Imatges/imatge_101.png)


**Múltiple Selecció (Només una Resposta): Selecció**

Aquest camp mostrarà les seves opcions de resposta amb botons rodons.

![](Imatges/imatge_102.png)
![](Imatges/imatge_103.png)


**Múltiple Selecció (Múltiples Respostes): Checkboxes**


Aquest camp mostrarà les seves opcions de resposta com a caselles de verificació i permetrà més d'una resposta.

![](Imatges/imatge_104.png)
![](Imatges/imatge_105.png)


> Nota: S'ha agregat una nota de camp (Field Note) que indica: “Marqui tot el que correspongui” (Check all that apply).


**Sí - No**

Aquest camp mostrarà _Sí_ i _No_ com opcions de resposta en forma de botons rodons.

![](Imatges/imatge_106.png)
![](Imatges/imatge_107.png)


**Veritable - Fals**

Aquest camp mostrará les opcions de resposta _Verdadero_ i _Falso_ en forma de botons rodons.

![](Imatges/imatge_108.png)
![](Imatges/imatge_109.png)


**Firma** _(dibuje la firma con el mouse o el dedo)_

Aquest camp permetrà que el participant agregui la seva firma amb el ratolí o el dit (en cas que utilitzi una tauleta o dispositiu de pantalla tàctil)

![](Imatges/imatge_110.png)
![](Imatges/imatge_111.png)


**Pujada d'arxius**: _File Upload (for users to upload files)_

Aquest camp dota a l'usuari amb la capacitat de càrrega d'un arxiu o imatge. 

![](Imatges/imatge_112.png)
![](Imatges/imatge_113.png)


**Lliscador d'escala analògica** _Slider Visual Analog Scale_

Aquest camp ens permet lliscar un valor a l'escala entre tres opcions de resposta

* Si seleccionem l'opció _¿Muestrar valor numérico (0-100)?_ codificarem la resposta donada amb un percentatge.

![](Imatges/imatge_114.png)
![](Imatges/imatge_115.png)


**Text Descriptiu** _Descriptive Text (with optional Image/File Attachment)_

Aquest camp ens permetrà agregar text (instruccions o informació addicional). 

![](Imatges/imatge_116.png)

També ens dóna la possibilitat d'agregar:

* Una imatge com un enllaç.

![](Imatges/imatge_138.png)


* Una imatge en línia.

![](Imatges/imatge_139.png)


**Nova Secció** _Begin New Section (with optional text)_

Aquest camp s'utilitza com una capçalera de secció.

![](Imatges/imatge_117.png)


Aquest camp pot:

* Incloure text addicional (1).
* Estar en blanc (2).

![](Imatges/imatge_118.png)


**Matriu de camp** 

![](Imatges/imatge_122.png)

Quan tenim una bateria de preguntes on totes comparteixen les mateixes opcions de resposta, podem crear una **Matriu de camps**.

![](Imatges/imatge_119.png)


Hem de:

* Fer clic a _Agregar Matriz de Campos_.
* Agregar un encapçalat opcional, les seves etiquetes de camp i noms de variables. 
* Indicar quins camps són necessaris (*Requerido*).
* Agregar les seves opcions de resposta.

![](Imatges/imatge_120.png)


* Seleccionar si aquests camps són de resposta única (botons rodons, *radiobuttons*) o de respostes múltiples (caselles de selecció, *Checkboxes*). 
* Habilitar la _Classificación_ en cas que es desitgi que només se seleccioni una opció de resposta per columna
* Donar-li a la matriu un nom de grup.

![](Imatges/imatge_121.png)


#### Modificació d'etiquetes de camp

**Editar/Copiar/Moure/Borrar un camp**

* ![](Imatges/imatge_123.png) Per **Editar** un camp.
* ![](Imatges/imatge_124.png) Per **Copiar** un camp.
* ![](Imatges/imatge_125.png) Per **Moure** un camp
* ![](Imatges/imatge_126.png) Per **Borrar** un camp.


**Afegir una lògica de bifurcació (*Branching logic*)**

![](Imatges/imatge_127.png) La lògica de bifurcació s'usa quan tenim un camp/pregunta que només ens agradaria que aparegués quan es dóna una resposta específica. 

* Per a habilitar-la, faci clic a les fletxes dobles verdes **al camp que desitja ocultar**.
* El camp alerta que existeix una lógica de bifurcació. 
    + Si volem veure o modificar la lògica de bifurcació existent, fem clic en les fletxes verdes.

Per exemple, només vull el camp “*Si és altre, si us plau, indiqui quin*:” per mostrar si la resposta a la pregunta anterior era “*Altre*”.

![](Imatges/imatge_128.png)


* Ens desplacem per la llista d'opcions de camp i, arrosseguem i deixem anar el camp en el qual desitja basar la nostra lògica de bifurcació. 
* Fem clic a _Guardar_ una vegada l'hem acabada.

![](Imatges/imatge_129.png)

**Afegir un _piping logic_**

Un piping logic ens brinda la possibilitat d'inserir respostes i situar-les en diversos llocs dins de REDCap. 



Per exemple, si tenim un camp que li pregunta al participant “*Quin és el seu gelat preferit?*”:
* Podem afegir un altre camp que pregunti al participant “*Amb quina freqüència menja gelat de ____?*”. 
* Agreguem un piping logic en la segona pregunta perquè insereixi la resposta de la primera pregunta.
 
![](Imatges/imatge_130.png)

* Per a agregar-la, hem d'inserir el nom de la variable del camp que es desitja canalitzar. 
* Aquest nom s'ha d'inserir entre claudàtors `[]`.

![](Imatges/imatge_131.png)


Un piping logices pot fer servir en diferents llocs de REDCap, com ara:

* Etiquetes de camp
* Notes de camp
* Capçaleres de secció
* Instruccions d'enquesta i text de reconeixement d'enquesta.

### **Instruments com a enquesta**

#### Habilitació enquesta

Primerament haurem d'habilitar “*Utilizar encuestas en este proyecto*”, en *Configuración de Proyecto*. 

* Posteriorment, indiquem quins instruments de la recopilació de dades seran utilitzats com a enquestes.

![](Imatges/imatge_132.png)


A l'*Editor de formularios en linea*, fem clic a *Habilitar* al costat de l'instrument de recopilació de dades que desitgem usar com a enquesta.

![](Imatges/imatge_133.png)


#### **Configuració enquesta**

Una vegada habilitada, apareixerà la pàgina “*Configurar mi encuesta*”.

**Opcions bàsiques d'enquesta**

![](Imatges/imatge_134.png)


* **Títol de l'enquesta**: Títol de l'enquesta. No necessàriament ha de ser el mateix nom que el del formulari.
* **Instruccions de l'enquesta**: Instruccions per donar al participant. Les instruccions predeterminades són “*Por favor, complete la encuesta a continuación. ¡Gracias!*”


**Opcions de disseny d'enquesta**

![](Imatges/imatge_135.png)


* **Logo**: Podem fer clic a "*Seleccionar archivo*" i agregar un logotip. Si agreguem un logotip, ens dóna l'opció d'ocultar el títol de l'enquesta.
* **Usi enhanced radio buttons and caselles de selecció**: Permet l'ús de botons i caselles de verificació estàndard o millorats.
* **Size of survey text**: Permet seleccionar la grandària del text de l'enquesta.
* **Font of survey text**: Permet seleccionar la font del text.
* **Survey theme**: Permet seleccionar el disseny de fons de l'enquesta.


**Opcions de personalització de l'enquesta**

![](Imatges/imatge_136.png)


* **Numeració de preguntes**: REDCap pot numerar automàticament les seves preguntes per vostè o pot assignar un número personalitzat a les seves preguntes.
* **Format de Visualització de Pregunta**
    + **Tot en una pàgina**: Si desitgem que totes les preguntes de l'enquesta es col·loquen en una pàgina.
    + **Una secció per pàgina (múltiples pàgines)**: Si desitgem dividir l'enquesta en seccions. Aquesta enquesta se separarà atenent a les capçaleres de seccions (les barres grogues). Si seleccionem aquesta opció, podem mostrar els números de pàgina en la part superior de la pàgina de l'enquesta.
* **_Allow participants to download a PDF of their responses at end of survey?_**: Si seleccionem _Si_, el participant podrà descarregar un arxiu en format PDF que contindrà les seves respostes.
* **_Survey-specific email invitation field_**: Designa un camp de correu electrònic per a enviar invitacions d'enquesta.
* **_Para los ‘campos obligatorios’, ¿mostrar en rojo el texto ‘debe proporcionar un valor’ en la página de la encuesta?_**: Si seleccionem _Sí_, mostrarà el missatge de text “*debe proporcionar un valor*” en cas de no respondre a la pregunta d'aquest camp.
* **_Permitir que los participantes a encuestas puedan ver los resultados agregados de la encuesta luego de completarla?_**: En la configuració per defecte està desactivada. 
    + En cas contrari, podem triar: mostrar gràfics, estadístiques descriptives o gràfics i estadístiques. 
    + Si habilitem aquesta configuració, podem triar la quantitat mínima de respostes abans que els participants puguin veure les dades agregades.
* **_Text-to-Speech functionality_**: Permet que el text en la pàgina de l'enquesta es llegeixi de manera audible als participants.

**Opcions d'accés a l'enquesta**

![](Imatges/imatge_137.png)


* **_Response Limit (optional)_**: Per introduir el nombre màxim de respostes que desitgem recollir.
* **_Time limit for Survey Completion (optional)_**: Per limitar el temps que tindrà l'enquestat per a completar l'enquesta.
* **_Expiración de la encuesta (opcional)_**: Per ingressar la data/hora quan ens agradaria que caduqui la seva enquesta.
* **_Permite la opción de ‘Guardar y volver luego’ para los respondedores?_**: Si desitgem que els participants puguin tornar i acabar d'emplenar la seva enquesta més tard.
   + Si està habilitat, el participant rebrà un codi que haurà d'ingressar per a continuar realitzant l'enquesta. 
   + També podem indicar si desitgem que els participants puguin tornar i modificar les seves respostes ja completes.


**Opcions de finalització d'enquesta**

![](Imatges/imatge_140.png)


* **_(Optional) Acte-continue to next survey_**: Per iniciar automàticament el següent instrument d'enquesta després d'acabar la present.
* **_Redireccionar a un URL_**: Per redirigir el participant en un altre URL després que hagi completat la seva enquesta, ingressi el URL completa.
* **_Texto de finalización de encuesta_**: Per ingressar el text que desitgem mostrar després que el participant hagi acabat de completar la seva enquesta.
    + El text predeterminat és "*Gracias por completar la encuesta". ¡Que tenga una buena jornada!*".
* **_PDF Acte-Archiver_**: Una vegada completada l'enquesta, s'emmagatzemarà automàticament una còpia compacta en PDF de les respostes de l'enquesta al Repositori d'arxius del projecte, des del qual els PDF arxivats es poden descarregar en qualsevol moment.
* **_¿Enviar correo electrónico de confirmación (opcional)?_**: Per enviar un correu electrònic a l'enquestat quan completi l'enquesta.


## **Secció**: _Habilitar módulos opcionales y personalizaciones_

**Acte-numeració per a registres**

Si el primer formulari del projecte és una enquesta, la numeració automàtica s'habilitarà automàticament.

* En cas contrari, si desitgem que REDCap generi un nou nom de registre únic, podem habilitar aquesta funció de manera manual.

![](Imatges/imatge_143.png)


**Botó avui/ara per a tots els camps de data/hora als formularis i enquestes**

Si no desitgem que la icona d'*Avui* aparegui al costat dels camps de data, podem desactivar aquesta configuració fent clic en _Personalitzaciones Addicionales_. 

* Desmarcatge la casella al costat de “Mostrar el botó Avui/Ara per a tots els camps de data o hora en els formularis i enquestes”.

![](Imatges/imatge_144.png)


## **Secció**: _Definir sus eventos y designar instrumentos para ellos_ {#en1}

![](Imatges/imatge_154.png)

Sols disponible pels projectes designats com **estudi longitudinals** prèviament a la [_Secció: Ajustes principales del proyecto_](#en7):

![](Imatges/imatge_82.png)

L’investigador, la investigadora o persona en qui delegui indicaran al personal de la UEB:

* L’estructura dels esdeveniments i processos necessaris per a l'estudi.
* Establirà el nombre de visites o esdeveniments així com els qüestionaris o esdeveniments que s’han de repetir.
* Indicarà el nombre de visites i els CRFs que s’han d’habilitar en cada visita, aportant en forma de quadre com el de l’exemple de sota.

![](Imatges/imatge_6.png)

El gestor de la base de dades assignarà en el REDCap els esdeveniments tal com figura a l’exemple següent:

![](Imatges/imatge_7.png)


Una vegada creats els esdeveniments en les [proves d’execució](#en2) es tindrà en compte que tot funcioni de manera adient. 

* Durant el procés de producció podran afegir-se o modificar-se, per sol·licitud de l’equip investigador, esdeveniments i repetició de formularis. 
    + Aquestes peticions han d'anar adreçades per correu electrònic al gestor de la base de dades que, una vegada fets els canvis, respondrà al correu indicant que estan fets en còpia a l’adreça [uebsol@vhir.org](mailto:uebsol@vhir.org?subject=Proves d'execució RedCAP) per tal que quedi constància.


## **Secció**: _Prueba tu proyecto a fondo_ {#en2}

**Proves d'execució** 

El personal tècnic de la UEB ha de realitzar i registrar les següents proves:

* Les lògiques de bifurcació es despleguen correctament (quan pertoca).
* Salta un missatge d’avís quan s’infringeixen els límits de les variables.
* Salta un error a l'introduir un valor erroni (p. ex. lletres en un camp numèric).
* En el cas d’haver-hi esdeveniments longitudinals, es corresponen als indicats pel personal investigador.
* En el cas d’haver-hi esdeveniments repetits, permet realitzar diferents esdeveniments.
* Les variables autocalculades retornen el valor que pertoca.
* Salta un missatge d’error quan s’infringeix una regla de validació.
* Totes les variables descrites al CRD en paper estan incloses a la base de dades REDCap.
* Els noms dels qüestionaris són correctes (comprovar accents).
* L’ordre dels qüestionaris és correcte.
* El nom de les variables és codificat segons s’indica a l'apartat de [Creació de formularis: Principis generals](#en7).

En el cas de no passar alguna de les proves, cal revisar la implementació, corregir el problema i verificar de nou el punt concret. Es farà de forma recursiva fins que passem el punt problemàtic. 

Una vegada passades les proves es pot procedir a:

* [Importar dades](#en8).
* [Preparar informes i exportacions](#en9).


## **Mòduls addicionals**: _Recolección de datos_

### **Accés a l'enquesta**

Un enllaç d'enquesta pública és la manera més simple i ràpida de recopilar respostes per a la seva enquesta. 

* Les respostes són recol·lectades anònimament. 

Per a configurar l'enllaç d'enquesta pública, ha de convertir el seu primer instrument en una enquesta.

* Per accedir-hi cal donar clic a l'opció del desplegable de l'esquerra "*Gestión de participantes a la encuesta*".

![](Imatges/imatge_141.png)

### **Pissarra d'Estat de Registres**

Taula que recull tots els registres/respostes existents i l'estat de cada instrument de recopilació de dades. Podem fer clic en una de les icones per a obrir l'instrument de recopilació de dades per a un registre específic.

![](Imatges/imatge_142.png)


### **Agregar/Editar Registres**

Podem veure un registre/resposta existent seleccionant-lo de la llista desplegable de més a baix. Per a crear un nou registre de resposta, faci clic en el botó Faci clic aquí per a agregar un nou registre.

![](Imatges/imatge_145.png)


## **Mòduls addicionals**: _Aplicaciones_

### **_Exportación de datos, Reportes y Estadísticas_** {#en9}

![](Imatges/imatge_146.png)


Ens permet:

* Veure fàcilment els informes de les seves dades.
* Exportar les seves dades, per a la seva posterior anàlisi, a: Microsoft Excel, SAS, Stata, R o SPSS. 
    + Opció A: Per exportar el conjunt de dades sencer o veure-ho com a informe.
    + Opció B: Per veure o exportar dades d'instruments específics (o esdeveniments).

![](Imatges/imatge_147.png)


#### Creació del script de lectura de dades {#en11}

Un cop es disposa de l’estructura de dades de REDCap i mitjançant algun programari que permeti replicar el procés sencer (habitualment R o STATA), cal crear un script que converteixi les dades proporcionades pel personal investigador a l’estructura concreta de la base de dades REDCap.

En aquest pas s’ha de tenir en compte i verificar els següents requisits:

* Les variables tipus “*factor*” s’han de codificar amb el número, no l’etiqueta (p. ex.: *1: Home, 2: Dona*, indicarem cada registre com a 1 o 2).
* Les variables tipus “*date*” són en format text (*character*) i han d’estar escrites com:
    + *YYYY-MM-DD* o,
    + *DD/MM/YYYY* o,
    + *YYYY-MM-DD hh:mm*, si inclou l’hora. En aquest cas, si no es disposa de l’hora, s’indicarà 00:00 (si l’investigador no indica una altra cosa).
* Els **noms de les variables** han de ser **exactament els mateixos** que s’han creat a REDCap, no es permeten majúscules. 
* L’**ordre de les variables** ha de ser el **mateix** que al qüestionari REDCap que correspongui.
* Per a cada qüestionari de REDCap es pot: 
    + Crear un fitxer de dades per a cada qüestionari o,
    + Crear un únic fitxer amb la informació de tots els qüestionaris. 
*	En cas que hi hagi esdeveniments repetits, que els investigadors poden haver codificat de formes diferents, es procedirà a identificar la seva codificació i adaptar-la programàticament al format requerit per REDCap.


Finalment, cal guardar l’arxiu amb les dades a importar amb l’estructura REDCap en un fitxer amb format “*.csv*”, separat per comes.


#### Creació d'informes {#en12}

També podem crear informes personalitzats en els quals podem:

* Filtrar l'informe a camps, registres o esdeveniments específics.
* Utilitzant una àmplia gamma d'eines de filtrat per a assegurar-nos d'obtenir les dades exactes que desitgem.

Una vegada que hàgim creat un informe, podem:

* Veure'l com una pàgina web.
* Exportar-lo de REDCap en un format específic (Excel, SAS, Stata, SPSS, R).
* Veure els gràfics i les estadístiques descriptives d'aquest informe.

![](Imatges/imatge_148.png)

Per a crear un informe es pot procedir de dues maneres:

* [Crear un nou informe des de zero](#en13)
*	[Crear un informe a partir d’un ja existent](#en14). 


##### Crear un informe des de zero {#en13}

Per crear un informe des de zero cal clicar a la pestanya *«Crear un nuevo reporte»*.

![](Imatges/imatge_18.png)


Per a cada informe s’ha d’omplir la següent informació: 

*	**“*Nombre del Reporte*”**: S’indicarà el nom amb el qual es vol que aparegui l’informe que s’està creant. Previ a posar el nom s’ha de verificar a la pestanya de “mis informes y exportaciones” que no existeixi un amb el mateix nom. 

![](Imatges/imatge_19.png)


* **“*Acceso usuarios*”**: es defineix al grup d’usuari amb accés a visualitzar-lo i exportar-lo. Aquest punt es defineix a partir de les indicacions de l’investigador principal (o representant de l’estudi).

![](Imatges/imatge_20.png)


*	**“*Los campos que se incluyen en el informe*”**: S’indiquen un a un tots els camps que es volen mostrar a l’informe. També es poden seleccionar a partir del botó “*Quick Add*”. 

![](Imatges/imatge_21.png)


*	En cas que el **projecte** estigui definit com a **longitudinal** es pot seleccionar els esdeveniments concrets que es mostraran a l’informe.

![](Imatges/imatge_22.png)


*	**“*Live Filters*”**: Cal seleccionar, en cas que l’informe ho requereixi, les variables per les quals es voldrà aplicar un filtre ‘*en viu*’. És a dir, un cop s’està visualitzant l’informe ens permetrà seleccionar un subconjunt d’individus a partir de la variable seleccionada en aquest apartat.

![](Imatges/imatge_23.png)


* **“*Ordenar los resultados*”**: cal indicar per quina o quines variables es vol que es mostri l’informe.

![](Imatges/imatge_24.png)


Es premerà el botó ‘*Guardar Reporte*’ per finalitzar l’operació de creació.


##### Crear un informe a partir d’un ja existent {#en14}

Per crear un informe a partir d’un altre que ja existeix cal anar a _«Mis informes y exportaciones»_ i clicar el botó “*Copiar*” de l’informe a partir del qual es vol treballar o modificar. 

Un cop copiat l’informe, sempre es treballarà en aquell informe que posa “*(copy)*”. 

S’accedeix al nou informe clicant el botó “*Editar*” i es revisen tots els punts indicats a l’apartat [Crear un nou informe des de zero](#en13). 


**Finalització de l'informe**

Una vegada es dóna per finalitzat un informe s’han de seguir les passes següents:

* Comprovar que l’informe es genera i s’exporta correctament i que mostra les estadístiques i gràfiques. 
* Comprovar que en el panell de l’esquerra a l’apartat “*Reportes*” apareix el nou informe. 

En un mateix projecte es poden crear tants informes com siguin necessaris. 

Una vegada verificada la unicitat es pot procedir [gestionar els permisos](#en3) i formació dels usuaris.


### **_Herramienta para importar datos_** {#en8}

L'eina per a importar dades, ens dóna instruccions sobre com importar dades al projecte. Podem importar dades al projecte corresponent des d'un arxiu CSV (delimitat per comes), o alternativament, des d'un arxiu XML en format CDISC ODM.

![](Imatges/imatge_153.png)


Si triem _CSV Import_:

![](Imatges/imatge_149.png)


* Descarreguem una de les plantilles d'importar dades que trobarem als enllaços de més a baix.
    + Aquestes plantilles són amb registres en les files o amb registres en les columnes.
* En cada columna de la plantilla d'importació de dades que descarreguem, cal ficar les dades de cada registre que volem importar.
* Una vegada que totes les dades han estat afegits, hem de desar l'arxiu.
* Cal assegurar-se no canviar les variables/els noms de camp en l'arxiu o ens pot aparèixer un error.
    + També per a tota la llista.
* Les files o columnes buides en l'arxiu poden eliminar-se sense problemes abans d'importar l'arxiu. 
    + Fent això es redueix el temps de processament de càrrega, especialment per a grans bases de dades.
* Seguidament, cal fer clic al botó _Subir Archivo_. 
    + Una vegada s'hagi carregat, les dades no seran importats immediatament, sinó que es mostraran i revisarà per errors per a assegurar que totes les dades estan en el format correcte abans d'importar finalment la base de dades.

Si triem _CDISC ODM (XML) import_:

![](Imatges/imatge_150.png)


* Indiquem si permet que els valors en blanc sobreescriguin els valors guardats existents.
* Fem clic al botó _Subir Archivo_.
    + Una vegada s'hagi carregat, les dades no seran importats immediatament, sinó que es mostraran i revisarà per errors per a assegurar que totes les dades estan en el format correcte abans d'importar finalment la base de dades.

A continuació podem obtenir diferents informacions: 

![](Imatges/imatge_16.png)


**Verificació de la importació de les dades**

* Si les dades han estat verificades i l’estructura correcta ha d’aparèixer el següent missatge:

![](Imatges/imatge_17.png)


A continuació podem obtenir diferents informacions: 

![](Imatges/imatge_16.png)


* Si apareixen registres en color taronja, cal revisar la informació que ens indica per verificar que no perdem informació i que les dades són correctes. 
* Si apareixen registres en vermell, ens indica que la importació no es pot dur a terme a causa de una incongruència greu en el format de les dades. Cal tornar a l'apartat [Creació de l’script](#en11). 
Un cop les dades han estat importades correctament s’ha de: 
    + Comprovar que el total de registres introduits a REDCap correspongui amb el que s’espera (nombre de registres previs a la importació + nombre de registres importats).
    + Revisar en dos registres, que les dades originals (enviades per correu pel personal investigador) i les dades disponibles a REDCap siguin les mateixes. 
    

### **_Herramientas para comparar datos_**

Seleccionem els registres que desitgem comparar. Ens apareixerà una taula comparativa que ens mostra les diferències entre els registres.

![](Imatges/imatge_151.png)


### **_Log/Registros**

Aquest mòdul enumera tots els canvis realitzats a la base de dades incloent les exportacions de les dades

![](Imatges/imatge_152.png)


## **Primera base de dades**

S'haurà de generar una base de dades com a taula de proves amb nom “base_formacio_nom_cognom” perquè quedi registrada, que inclogui:

* Una data
* Una variable numèrica
* Una variable de selecció múltiple
* Una variable de selecció única
* Un càlcul
* Una derivació lògica

Una setmana més tard, s'haurà de respondre l'[enquesta de registre de formació](http://j.mp/2XLjGuK).

[![](Imatges/imatge_2.png)](http://j.mp/2XLjGuK)

Fins que no es creï la base de dades i es completi aquesta enquesta no s'aprovaran les bases de dades creades per aquest usuari.

* Si passades dues setmanes no hi ha resposta, es retirarà l'enquesta.

### **Principis generals** {#en7}

Es disposaran tants formularis com sigui necessari. S’intentarà reutilitzar o adaptar qüestionaris que hagin estat emprats amb anterioritat que figuren com a plantilles en el sistema REDCap. Aquests consten normalment dels següents elements:

* Screening
* Inclusion/Exclusion Criteria
* Demographic data
* Vital signs
* Medical History
* Lab Data
* Treatment Data
* Follow up
* Adverse Events
* Concomitant Medication
* ECG
* Prenancy Test
* Discontinuation estudy 
* Previous treatment
* Etc.

El nom del qüestionari ha de ser il·lustratiu del seu contingut i no massa llarg. Aquest nom ha de figurar com camp de text descriptiu a l’inici de cada CRF. De la mateixa manera si hi ha diferents seccions en el CRF, caldria diferenciar-les utilitzant un camp de text descriptiu:

![](Imatges/imatge_4.png)

El nom de les variables ha de tenir la següent estructura: *ccc_nomvar*, on: 

* *ccc* són de 2-5 lletres que identifiquen el qüestionari.
* *nomvar* ha de ser un nom curt que identifiqui la variable fàcilment. 

En conjunt no haurien de superar-se els 16, però si cal per circumstàncies de comprensió de les variables es pot superar conjunturalment aquest nombre. Atés el tipus de variable:

* En el cas de variables que siguin una __data__ s’utilitzarà la terminació _"_tcd"_ per aquestes variables.
* El nom de les variables es posarà per norma en minúscules a excepció d’alguna lletra si cal.

Pels diferents tipus de CRFs, es recomanen els següents registres:

```{r, results='asis'}
form <- import("Dades/formularis.xlsx")
kable_ueb(form)
```

Els eCRF han d'estar endreçats per l’ordre en què apareixen en el projecte. A l'apartat [*Secció: Definir sus eventos y designar instrumentos para ellos*](#en1) es troba com definir els esdeveniments i processos en els quals participa l'eCRF.

* Una vegada l'eCRF està implementat de forma definitiva i ha passat a producció, per efectuar una modificació, aquesta ha de ser remesa per correu electrònic al gestor de la base de dades. 
*	Abans d’efectuar la modificació es procedirà a fer una descàrrega del projecte (metadades i dades) i es desarà en la carpeta de la sol·licitud. El fitxer queda gravat com _“nomdatabase_data_hora.xml”_.

![](Imatges/imatge_5.png)

* Es procedirà a efectuar els canvis i se li enviarà un correu a l'investigador en resposta a la seva sol·licitud de canvi indicant-li que els canvis han estat realitzats.


## **Validació de la gestió de dades: Validació PQ** {#en16}

### **Definició**

Una validació PQ pretén:

* Indicar les responsabilitats derivades de la gestió de dades d’un estudi clínic.
* Verificar el seu funcionament correcte.
* Verificar com aportar la documentació pel correcte funcionament del sistema. 

La base de dades serà creada en la plataforma validada REDCap (Research Electronic Data Capture) per a la creació de quaderns de recollida de dades (CRD). En aquest apartat queden recollides les accions a validar d'un eCRD específic, on, la documentació s’origina segons els principis de GCP.


### **Procés**

Aquest apartat recull les proves de verificació de funcionament positiu i proves d’estrès que s’han d'executar, una vegada està preparada la base de dades, seguint el procediment de gestió de bases de dades en REDCap.

L’abast de la validació té a veure amb el correcte funcionament i informació de si:

* Es disposa de criteris de codificació i diccionaris o CRD en paper.
* Hi ha canvis en els diccionaris o CRD en paper i estan versionats.
* Les variables estan ben definides d’acord amb la codificació dels diccionaris.
* Els esdeveniments i les seves repeticions estan definides d’acord amb l’esquema del protocol.
* Els formularis estan ben assignats a cada esdeveniment.
* Les seqüències lògiques estan ben programades i funcionen correctament.
* Els camps calculats efectuen els càlculs com pertoca.
* Els valors de validació funcionen correctament (límits i tipus de variable).
* Les regles de validació de qualitat funcionen adequadament.
* El gestor de quèries està activat.
* Els usuaris estan creats en el sistema i han rebut la formació adequada.
* Els rols estan programats de manera adequada.
* Els usuaris estan assignats al rol que pertoca.
* Existeix una (*backup*) còpia de seguretat de la versió definitiva abans d’enviar a producció.

S’executaran les proves dissenyades i s’elaborarà un informe amb les evidències que tot funciona de manera adequada que s’adjuntaran al formulari i s’arxivaran.

* L’existència de desviacions quedarà també reflectida en l’informe, així com les acciones proposades per a la seva resolució.


## **Tancament base de dades**

Una vegada introduïdes i verificades totes les dades cal procedir al “tancament de la base de dades”.

* L’investigador, la investigadora, o la persona en qui delegui, ha d’enviar un correu al gestor de dades per indicar que pot procedir a tancar la base de dades.
* D'ara endavant __ningú__ podrà realitzar cap modificació, ni en estructura (afegir, modificar o eliminar camps) ni en contingut (afegir, modificar o eliminar registres).
* Una vegada exportades les dades per les anàlisis, només el gestor de dades podrà restaurar-la si cal amb les justificacions pertinents.


# **Controls de qualitat**

## **Gestió de _Queries_**

### **Personal gestor del sistema de _Queries_**

Ha d'encarregar-se de:

* Connectar-se al sistema amb el seu usuari i contrasenya i tenir permisos per: 
    + Configurar i dissenyar el projecte
    + Crear, editar i executar regles de la base de dades concreta 
* Disposar dels documents proporcionats per l’equip d’investigació amb els controls de qualitat a implementar.
* Comprovar que està activada l’opció _«Habilitar el registro de campo Comentario o Resolución de los datos de flujo de trabajo (datos de consultas)?»_ al següent mòdul: _«Configuración del proyecto» / «Habilitar módulos opcionales y personalizaciones»_ / _«Personalizaciones adicionales»_.

![](Imatges/imatge_8.png)

* Comprovar, en un camp qualsevol d’un registre de prova, que apareix la bafarada al costat del camp com segueix:

![](Imatges/imatge_9.png)


Per implementar les regles de coherència que faran saltar les *Queries* cal anar a _«Calidad de los datos»_ on s’obrirà la següent finestra:

![](Imatges/imatge_10.png)

Hi ha dos tipus de regles de validació:

* Les regles pròpies del sistema (en vermell).
* Les regles personalitzades de cada base de dades que són en les que ens centrarem. 


## **Implementació de regles personalitzades** {#en6}

Per cada regla s’afegirà una nova línia i a cada línia cal especificar: 

* **Nom descriptiu de la regla**: Missatge que saltarà quan aquesta s’incompleixi.
* **Lògica de la regla**: a partir de les variables i qüestionaris introduïts en la [creació del formulari](#en4) cal definir la lògica corresponent a cada control de qualitat.

Habitualment s’indicarà _«Ejecutar en tiempo real en formularios»_ això provoca que salti un missatge en el moment de guardar un cop s’ha incomplet la regla. 

![](Imatges/imatge_11.png)

* En cas que __no__ es marqui aquesta casella caldrà seguir obligatòriament l'apartat [Execució de les regles de control de qualitat](#en5).


### **Comprovació de regles personalitzades**

Un cop implementades totes les regles es procedeix a la comprovació del correcte funcionament d’aquestes.

S’eliminen tots els registres de proves que s’hagin creat i es crea un nou registre de prova on s’aniran validant una a una totes les regles. Per a cada regla cal: 

* Introduir un valor vàlid i comprovar que no salti la *Query*.
* Introduir un valor erroni i comprovar que salta la *Query*.


## **Execució de les regles de control de qualitat** {#en5}

Aquest punt aplica per ambdós tipus de regles (pròpies i personalitzades). 
S’accedeix al menú de _«Calidad de datos»_ on trobarem una pantalla amb aquest aspecte. Han d’aparèixer les regles pròpies del sistema i les que s’han creat a l'apartat [Implementació de regles personalitzades](#en6).

![](Imatges/imatge_12.png)

Per a l’execució de les regles es pot procedir de diferents formes: 

* Totes
* Totes excepte la A&B
* Totes les personalitzades.


En qualsevol cas, al prémer un dels 3 botons ha d’aparèixer a la columna _«Discrepancias Totales»_ un 0 verd o un número vermell. 

* En el cas que apareguin per alguna de les regles de validació un número vermell s’ha de clicar al botó _«View»_ i comprovar que la discrepància és la que s’espera.

Una vegada comprovat el funcionament dels controls de qualitat implementats es pot procedir a:

* Enviar el document de formació als monitors.
* [Efectuar les proves d’execució](#en2).


# **Definicions i abreviatures**

```{r, results='asis'}
abrev <- import("Dades/abreviatures.xlsx")
kable_ueb(abrev)
```